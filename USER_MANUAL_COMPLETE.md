# 📚 用戶使用手冊 - 完整指南

**文檔版本：** v0.7  
**最後更新：** 2025-12-24  
**適用版本：** Ticket Bot Helper v0.7+

---

## 📖 目錄

1. [新增功能概覽](#新增功能概覽)
2. [功能詳解](#功能詳解)
3. [常見操作](#常見操作)
4. [故障排除](#故障排除)
5. [進階配置](#進階配置)

---

## 🆕 新增功能概覽

### v0.7 主要新功能

| 功能 | 描述 | 使用場景 |
|------|------|---------|
| **導入/導出** | 支持 JSON 和 CSV 格式 | 備份任務、批量導入、任務共享 |
| **批量操作** | 一次操作多個任務 | 快速管理大量任務 |
| **高級搜索** | 複雜條件搜索和排序 | 精確查找任務 |
| **權限管理** | 多角色權限控制 | 團隊協作、訪問控制 |
| **虛擬滾動** | 高效渲染大列表 | 性能優化 |
| **骨架屏** | 優雅的加載提示 | 用戶體驗提升 |
| **智能快取** | 本地數據快取 | 離線使用、速度優化 |

---

## 📚 功能詳解

### 1. 導入/導出任務

#### 1.1 導出任務

**場景**：備份任務、轉移到其他設備、與他人分享

**步驟**：
1. 進入「任務列表」
2. 點擊右上角「⋯ 更多」菜單
3. 選擇「導出任務」
4. 選擇格式（JSON 或 CSV）
5. 任務會自動下載到本地

**格式說明**：
- **JSON 格式**：保留完整信息，包括統計數據和配置
- **CSV 格式**：簡潔表格形式，易於在 Excel 中打開

**示例**：
```
導出的文件名：tasks_export_1703348400000.json
包含內容：
- 導出時間
- 任務數量
- 完整任務數據
```

#### 1.2 導入任務

**場景**：恢復備份的任務、批量添加新任務、復用模板

**步驟**：
1. 點擊「導入任務」按鈕
2. 選擇 JSON 或 CSV 文件
3. 系統自動驗證
4. 查看驗證結果
5. 點擊「確認導入」

**驗證結果說明**：
- ✅ **成功**：任務將被添加到系統
- ⚠️ **警告**：部分任務有問題，可以選擇跳過或編輯
- ❌ **失敗**：整個導入失敗，請檢查文件格式

**常見問題**：
- Q: 導入後任務 ID 會改變嗎？
- A: 是的，系統會生成新的 ID 以避免衝突

- Q: 能否導入已存在的任務？
- A: 可以，會創建副本，建議先檢查是否重複

### 2. 批量操作

#### 2.1 多選任務

**步驟**：
1. 將鼠標移到任務卡片
2. 點擊左上角的複選框
3. 多選：Ctrl + 點擊或 Shift + 點擊
4. 全選：點擊表頭的「全選」複選框

**選擇後可執行的操作**：
- 🚀 批量啟動
- ⏸️ 批量暫停
- ▶️ 批量恢復
- 🗑️ 批量刪除
- 📋 批量複製
- 🎯 批量設置優先級

#### 2.2 執行批量操作

**示例 - 批量啟動**：
1. 選擇多個待機任務
2. 點擊「批量啟動」
3. 確認操作
4. 系統顯示執行結果

**操作結果說明**：
```
✅ 已啟動 5 個任務，失敗 0 個（耗時 1.23s）
```

**批量設置優先級**：
1. 選擇任務
2. 點擊「優先級」下拉菜單
3. 選擇新優先級（1-10）
4. 應用

#### 2.3 批量複製

**用途**：快速創建相似的任務

**步驟**：
1. 選擇要複製的任務
2. 點擊「批量複製」
3. 系統會創建副本，名稱後綴「(副本)」
4. 副本的狀態為「待機」

**提示**：複製後可以修改細節，無需從頭配置

### 3. 高級搜索

#### 3.1 基本搜索

**搜索框位置**：任務列表上方

**搜索類型**：
- 輸入「演唱會」→ 搜索名稱和事件名稱
- 輸入 URL → 搜索目標網址
- 支持模糊匹配和精確匹配

#### 3.2 高級篩選

**按狀態篩選**：
- 🟡 待機（Pending）
- 🔵 運行中（Running）
- 🟢 成功（Success）
- 🔴 失敗（Failed）
- ⚪ 暫停（Paused）

**按優先級篩選**：
- 低優先級（1-3）
- 中優先級（4-6）
- 高優先級（7-10）

**按日期篩選**：
- 選擇「開始日期」和「結束日期」
- 系統會顯示該日期範圍內的事件

**組合搜索**：
```
例如：搜索所有高優先級的待機任務
1. 選擇狀態「待機」
2. 設置優先級「7-10」
3. 系統自動過濾
```

#### 3.3 排序

**可排序字段**：
- 名稱（A-Z 或 Z-A）
- 事件日期（最早優先或最晚優先）
- 優先級（高到低或低到高）
- 成功率（最高或最低）
- 創建時間

**排序步驟**：
1. 點擊列表頭部的排序圖標 ⬆️⬇️
2. 選擇排序字段
3. 選擇排序方向
4. 列表自動重新排列

### 4. 權限管理（管理員功能）

#### 4.1 用戶角色

**四大角色**：

| 角色 | 權限 | 使用場景 |
|------|------|---------|
| **管理員** | 完全控制 | 系統管理員 |
| **經理** | 管理用戶和任務 | 團隊負責人 |
| **用戶** | 管理自己的任務 | 普通用戶 |
| **訪客** | 僅查看 | 臨時瀏覽 |

#### 4.2 設置用戶權限（管理員）

**訪問路徑**：後台管理 → 用戶管理

**步驟**：
1. 列出所有用戶
2. 點擊用戶名進入詳情
3. 修改角色或權限
4. 保存更改

#### 4.3 權限檢查

系統會在以下操作時檢查權限：
- 創建任務
- 編輯任務（只能編輯自己的）
- 刪除任務
- 執行自動搶票
- 查看統計報告
- 訪問系統設置

---

## 🎯 常見操作

### 創建搶票任務的完整流程

```
1️⃣ 點擊「新增任務」
   ↓
2️⃣ 填寫基本信息
   - 任務名稱：e.g. 「XX演唱會搶票」
   - 事件名稱：e.g. 「XX演唱會」
   - 事件日期：2025-12-25
   - 售票開始時間：2025-12-24 10:00:00
   ↓
3️⃣ 配置購票信息
   - 目標 URL：售票網站地址
   - 購票數量：想要購買的票數
   - 座位偏好：前排/中排/後排
   ↓
4️⃣ 設置自動化配置
   - 購票按鈕選擇器：.buy-btn（需要檢查網站代碼）
   - 點擊延遲：100ms（根據網速調整）
   - 最大重試次數：3次
   ↓
5️⃣ 配置通知
   ☑️ 啟用桌面通知
   ☑️ 啟用郵件通知（可選）
   ↓
6️⃣ 點擊「保存」
   ↓
✅ 任務創建完成，狀態為「待機」
```

### 監控任務執行

```
1️⃣ 進入任務列表
   ↓
2️⃣ 點擊任務卡片查看詳情
   - 當前狀態
   - 執行進度
   - 嘗試次數
   - 成功次數
   ↓
3️⃣ 查看實時日誌
   - 每次執行記錄
   - 錯誤信息
   ↓
4️⃣ 可隨時暫停/恢復/取消
```

### 分析成功率

```
進入「統計分析」選項卡
   ↓
查看卡片統計
- 總任務數
- 成功數
- 失敗數
- 整體成功率
   ↓
詳細圖表
- 按狀態分布（餅圖）
- 按日期趨勢（折線圖）
- 按優先級分布（柱狀圖）
   ↓
導出統計報告（可選）
```

---

## 🔧 故障排除

### 問題 1：任務無法啟動

**症狀**：點擊「啟動」但任務保持待機狀態

**可能原因**：
1. ❌ 網絡連接問題
2. ❌ 購票按鈕選擇器錯誤
3. ❌ 售票網站結構已改變
4. ❌ 瀏覽器權限不足

**解決方案**：
```
Step 1: 檢查網絡
- 打開瀏覽器開發者工具（F12）
- 查看 Console 是否有錯誤

Step 2: 驗證選擇器
- 訪問售票網站
- 右鍵檢查購票按鈕
- 複製正確的 class 或 id

Step 3: 更新配置
- 編輯任務
- 修正購票按鈕選擇器
- 保存並重試

Step 4: 檢查權限
- 後台管理 → 用戶管理
- 確認用戶有「TASK_EXECUTE」權限
```

### 問題 2：搜索結果為空

**症狀**：搜索功能不返回預期結果

**可能原因**：
1. ❌ 搜索關鍵詞不匹配
2. ❌ 篩選條件過於嚴格
3. ❌ 任務列表為空

**解決方案**：
```
Step 1: 重置篩選條件
- 清除所有篩選
- 點擊「重置搜索」

Step 2: 修改搜索詞
- 使用更通用的關鍵詞
- 嘗試模糊搜索

Step 3: 檢查任務列表
- 確認任務已創建
- 查看任務狀態
```

### 問題 3：導入失敗

**症狀**：上傳文件後顯示錯誤

**常見錯誤**：
| 錯誤信息 | 原因 | 解決方案 |
|---------|------|--------|
| 文件格式不支持 | 上傳了不支持的格式 | 使用 JSON 或 CSV |
| 缺少必填字段 | 任務名稱為空 | 檢查文件內容 |
| 日期格式無效 | 日期格式不對 | 使用 YYYY-MM-DD |

**解決方案**：
```
Step 1: 下載導入模板
- 點擊「下載模板」
- 選擇格式（JSON 或 CSV）

Step 2: 參考模板填寫
- 按照模板格式填寫
- 確保所有必填項

Step 3: 重新上傳
- 使用修正後的文件
- 檢查驗證結果
```

### 問題 4：性能問題

**症狀**：
- 列表加載緩慢
- 搜索不流暢
- 批量操作卡頓

**解決方案**：
```
Step 1: 清理快取
- 進入設置
- 點擊「清理快取」
- 刷新頁面

Step 2: 減少任務數量
- 刪除不需要的任務
- 或按日期篩選舊任務
- 然後存檔

Step 3: 檢查瀏覽器
- 關閉其他標籤
- 增加瀏覽器內存分配
- 嘗試其他瀏覽器

Step 4: 優化設置
- 設置→性能
- 禁用實時更新
- 增加更新間隔
```

---

## ⚙️ 進階配置

### 1. 自定義購票按鈕選擇器

**為什麼需要**：不同網站的按鈕元素不同

**如何查找**：
```
1. 打開售票網站
2. 右鍵點擊購票按鈕
3. 選擇「檢查」或「Inspect」
4. 查看 HTML 代碼
5. 複製 class 或 id

示例：
<button class="btn-primary buy-button" id="purchase">購買</button>

可用選擇器：
- .btn-primary（class 選擇器）
- #purchase（id 選擇器）
- button.buy-button（標籤 + class）
```

### 2. 調整自動化參數

**點擊延遲（Click Delay）**：
- 默認：100ms
- 網速慢：增加到 200-300ms
- 網速快：降低到 50ms

**重試次數（Max Retries）**：
- 默認：3次
- 關鍵任務：增加到 5-10 次
- 不重要：可降低到 1-2 次

**重試間隔（Retry Interval）**：
- 默認：1000ms
- 網站限流：增加到 2000-5000ms
- 正常情況：無需改動

### 3. 通知設置

**啟用桌面通知**：
- 需要瀏覽器權限
- 首次使用時會彈出授權提示
- 允許後才能收到通知

**郵件通知**：
- 需填寫有效的郵件地址
- 搶票成功時會發送確認郵件
- 需要系統支持郵件發送

### 4. 優先級策略

**如何設置優先級**：
```
優先級 1-3：低
- 非緊迫的任務
- 門票容易搶

優先級 4-6：中
- 普通搶票任務

優先級 7-10：高
- 非常搶手的門票
- 時間敏感任務
- VIP 演出
```

**優先級影響**：
- 系統會優先執行高優先級任務
- 多個任務同時執行時，高優先級優先完成

---

## 📞 常見問題（FAQ）

**Q: 多個瀏覽器標籤頁能共享任務嗎？**  
A: 可以。使用 GUN.js 實現跨設備同步，任務會自動同步到所有打開的標籤。

**Q: 離線時能使用嗎？**  
A: 可以查看本地快取的任務，但新增和修改需要網絡連接。

**Q: 數據會被保存多久？**  
A: 默認保存到本地存儲（IndexedDB），除非手動刪除。

**Q: 能否設置多個相同事件的搶票任務？**  
A: 可以。系統支持創建多個相同事件的任務，用於提高成功率。

**Q: 暫停後如何繼續？**  
A: 點擊「恢復」按鈕即可繼續執行。系統會記住之前的進度。

---

## 🔐 隱私和安全

**數據存儲位置**：
- 所有數據存儲在本地瀏覽器
- 不上傳到任何服務器
- 完全隱私保護

**推薦做法**：
- 定期備份任務（導出為 JSON）
- 不要在公共電腦上使用
- 定期清理過期任務

---

**需要幫助？** 檢查文件中的相應部分或查看視頻教程。

---

**版本：** v0.7  
**最後更新：** 2025-12-24  
**下一版本預計：** 2026-Q1
