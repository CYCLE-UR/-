# 智能搶票助手 - 產品需求文檔（PRD）

## 一、項目概述

### 項目名稱
智能搶票助手（Ticket Bot Helper）

### 項目描述
一個純前端的網頁應用，幫助追星族通過機器人輔助功能自動搶購演唱會、演出等門票，解決手動搶票效率低的問題。

---

## 二、目標客群分析

### 客群定位
**追星族**

### 客群特質
- 熱愛音樂、演出或體育賽事
- 時間可能不固定，常常錯過開賣時間
- 手動搶票速度慢，容易被機器人或黃牛搶先
- 對技術有基本的興趣與學習意願

---

## 三、客群痛點分析

### 情境 1：門票在奇怪時間開賣，但剛好沒空
**痛點：**
- 無法及時守候搶票時間
- 錯過開賣時段無法補救
- 工作/學習期間無法分心搶票

### 情境 2：搶不過機器人
**痛點：**
- 手動點擊速度無法與自動化機制競爭
- 被機器人秒搶，根本搶不到票
- 無法使用相同技術對抗

### 情境 3：買黃牛票價格超貴
**痛點：**
- 黃牛加價幅度大（可能 2-5 倍原價）
- 有風險被坑或買到假票
- 經濟負擔重

---

## 四、產品定位

### 主要解決的痛點
**「搶不過機器人 → 加入機器人搶票」**

透過提供客戶端的自動搶票機制，幫助用戶在關鍵時刻自動執行購票操作，提高搶票成功率。

### 核心價值主張
- ✅ **自動化搶票**：設置時間和目標，機器人自動執行
- ✅ **完全本地化**：純前端應用，無需服務器，隱私有保障
- ✅ **實時同步**：使用 GUN.js 實現設備間數據同步
- ✅ **使用者友善**：簡單易用的界面配置

---

## 五、核心功能需求

### 5.1 用戶認證 & 登錄
- [ ] 支持匿名使用或基于 GUN.js 的去中心化登錄
- [ ] 用戶身份持久化存儲

### 5.2 搶票配置管理
- [ ] 新增搶票任務（選擇演唱會、目標購票時間等）
- [ ] 編輯/刪除搶票任務
- [ ] 配置購票信息（座位偏好、數量、支付方式等）
- [ ] 本地或云同步保存配置

### 5.3 自動搶票引擎
- [ ] 定時檢查指定時間（精確到秒）
- [ ] 自動點擊購票按鈕/提交購票表單
- [ ] 支持多個搶票任務並行執行
- [ ] 搶票失敗重試機制

### 5.4 實時通知
- [ ] 搶票開始/完成的通知
- [ ] 搶票失敗提醒
- [ ] 瀏覽器通知（桌面提醒）

### 5.5 歷史記錄 & 分析
- [ ] 記錄搶票嘗試歷史
- [ ] 顯示成功率統計
- [ ] 導出搶票日志

### 5.6 多設備同步
- [ ] 使用 GUN.js 實現跨設備數據同步
- [ ] 多個瀏覽器/設備上的任務配置一致性

---

## 六、技術架構

### 技術棧
| 層級 | 技術選型 | 原因 |
|------|--------|------|
| **前端框架** | Vue 3 (CDN) 或原生 JS | 輕量、易部署 |
| **樣式框架** | Tailwind CSS (CDN) | 響應式設計快速開發 |
| **數據庫** | GUN.js (CDN) | 去中心化、實時同步、支持 P2P |
| **測試框架** | Vitest + Testing Library | 快速、零配置、CDN 友好 |
| **打包工具** | 無需打包（純 CDN） | 直接在瀏覽器運行 |

### 項目結構（計劃）
```
.
├── index.html              # 主 HTML 文件
├── css/
│   └── styles.css         # 自定義樣式
├── js/
│   ├── app.js            # 主應用邏輯
│   ├── bot-engine.js     # 搶票引擎
│   ├── storage.js        # GUN.js 數據管理
│   ├── notifications.js  # 通知系統
│   └── utils.js          # 工具函數
├── tests/
│   ├── bot-engine.test.js
│   ├── storage.test.js
│   └── utils.test.js
├── PRD.md                 # 本文檔
├── AGENTS.md             # 項目進度記錄
└── README.md             # 使用說明
```

---

## 七、非功能性需求

### 性能
- 頁面加載時間 < 3 秒
- 搶票響應延遲 < 100ms

### 安全性
- 不存儲用戶的真實支付信息
- 使用本地存儲或加密的 GUN.js 存儲敏感配置

### 可用性
- 支持桌面和移動設備
- 界面簡潔直觀，新手易上手

### 可靠性
- 掉線自動重連
- 搶票任務的持久化保存

---

## 八、成功指標

- [ ] 應用能成功執行自動搶票任務
- [ ] 測試覆蓋率 > 80%
- [ ] 多設備數據同步正常運作
- [ ] 用戶反饋滿意度 > 4/5

---

## 九、開發計劃（TDD 方式）

### 第一階段：核心基礎
1. **搭建項目結構 & 測試框架**
   - 創建 HTML/CSS 基本框架
   - 配置 Vitest 測試環境
   - 編寫項目 AGENTS.md

2. **GUN.js 集成 & 數據存儲**
   - 測試 GUN.js CDN 集成
   - 實現用戶認證邏輯
   - 實現數據持久化 CRUD

3. **搶票任務配置**
   - TDD：先寫任務配置的測試
   - 實現添加/編輯/刪除任務功能
   - 實現任務數據同步

### 第二階段：核心功能
4. **自動搶票引擎**
   - TDD：編寫搶票邏輯測試
   - 實現定時執行
   - 實現自動點擊/表單提交

5. **實時通知系統**
   - 實現瀏覽器通知 API
   - 狀態更新推送

### 第三階段：優化 & 發布
6. **歷史記錄 & 分析**
7. **測試完善 & 性能優化**
8. **文檔 & 部署**

---

## 十、依賴與假設

### 外部依賴
- CDN 服務可用性（jsDelivr、cdnjs 等）
- GUN.js 可靠性

### 假設
- 用戶可以直接訪問目標售票網站
- 目標售票網站的 UI 相對穩定

---

## 十一、風險與應對

| 風險 | 影響 | 應對方案 |
|------|------|--------|
| 售票網站更新導致自動化失效 | 高 | 定期測試和維護，提供手冊教學如何自定義選擇器 |
| CDN 不可用 | 中 | 提供備用 CDN，或支持本地部署 |
| GUN.js 性能問題 | 中 | 優化數據同步策略，實現本地緩存 |

---

## 十二、版本控制

| 版本 | 日期 | 更新內容 |
|------|------|--------|
| v0.1 | 2025-12-10 | 初稿 |

