# 智能搶票助手 - 使用指南

## 🚀 系統已就位！

開發伺服器已啟動，你現在可以訪問以下地址：

### 📍 訪問地址

| 頁面 | URL | 說明 |
|------|-----|------|
| **前台演示** | http://127.0.0.1:8080/demo.html | 用戶搶票工具 |
| **後台管理** | http://127.0.0.1:8080/admin.html | 管理員管理平台 |
| **主頁** | http://127.0.0.1:8080/index.html | 首頁 |

---

## 🎫 前台使用教程 (demo.html)

### 步驟 1：登入
1. 進入 https://127.0.0.1:8080/demo.html
2. 點擊「🚀 開始使用」按鈕
3. 系統會自動匿名登入

### 步驟 2：創建搶票任務
1. 點擊「➕ 新增任務」按鈕
2. 填寫任務資訊：
   - **演唱會名稱**：例如「Taylor Swift 演唱會」
   - **開票時間**：選擇演唱會開票時間
   - **目標網址**：售票網站 URL
   - **自動點擊選擇器**：要自動點擊的按鈕（如 `.buy-button`）

### 步驟 3：執行任務
1. 點擊任務卡片右側的「▶️ 開始」按鈕
2. 系統會在指定時間自動執行搶票
3. 監控任務狀態：
   - 🟡 **待機**：等待時間
   - 🔵 **運行中**：正在執行
   - 🟢 **成功**：搶票完成
   - 🔴 **失敗**：出現錯誤

### 步驟 4：查看統計
- 頁面上方實時顯示：
  - 📊 總任務數
  - ✅ 成功數
  - ❌ 失敗數
- 點擊「統計分析」查看詳細報表

### 步驟 5：設置通知
1. 點擊「設置」按鈕
2. 啟用「桌面通知」權限
3. 任務完成時會收到系統通知

---

## 🔐 後台使用教程 (admin.html)

### 步驟 1：登入後台
1. 進入 http://127.0.0.1:8080/admin.html
2. 輸入管理員帳號和密碼：
   - **帳號**：`admin`
   - **密碼**：`admin123`
3. 點擊「🔓 登入後台」

### 步驟 2：查看儀表板
登入後會看到系統概覽：
- 👥 總用戶數
- 📋 總任務數
- ✅ 成功率
- 📅 今日任務
- ⏳ 待執行數量
- ❌ 失敗數量
- 💾 存儲使用量
- ⚡ 平均執行時間

### 步驟 3：用戶管理
1. 點擊側邊欄「👥 用戶管理」
2. 查看所有用戶列表
3. 功能：
   - 🔍 搜索用戶
   - 📊 查看用戶成功率
   - 👁️ 查看用戶詳情
   - 📥 導出用戶數據（CSV）

### 步驟 4：任務監控
1. 點擊「📋 任務監控」
2. 查看全部任務（所有用戶）
3. 可按狀態過濾：
   - 全部任務
   - 待執行
   - 執行中
   - 已成功
   - 已失敗
4. 查看任務詳情

### 步驟 5：統計分析
1. 點擊「📈 統計分析」
2. 查看圖表：
   - 📊 任務狀態分布（圓形圖）
   - 📈 成功率趨勢（折線圖）
   - 🏆 熱門活動排行（前 10）

### 步驟 6：系統監控（後台獨有）
1. 點擊「🖥️ 系統監控」
2. 查看三個信息面板：
   - **存儲使用情況**：已用空間、項目數、任務數
   - **性能指標**：執行時間、活躍用戶、運行中任務
   - **系統狀態**：健康狀態、成功率、最後更新時間
3. 查看用戶活動分布：
   - 🔵 重度用戶（>10 個任務）
   - 🟢 中度用戶（5-10 個任務）
   - 🟡 輕度用戶（1-4 個任務）
   - ⚫ 新用戶（0 個任務）
4. 危險操作區：
   - 🗑️ 清理 30 天前的舊任務
   - 📥 導出所有數據
   - ⚠️ 重置整個系統

### 步驟 7：通知記錄
1. 點擊「🔔 通知記錄」
2. 查看系統發送的所有通知
3. 按類型標籤過濾：✅ 成功 / ❌ 失敗 / ⏳ 進度 / ⚠️ 警告

### 步驟 8：系統設置
1. 點擊「⚙️ 系統設置」
2. 配置通知選項
3. 數據管理操作
4. 查看系統資訊（版本、更新時間、技術棧）

---

## 📊 功能對比

### 前台 vs 後台

| 功能 | 前台 | 後台 |
|------|------|------|
| 登入方式 | 匿名自動 | 密碼認證 |
| 數據範圍 | 僅個人 | 全局 |
| 統計卡片 | 4 個 | 8 個 |
| 系統監控 | ❌ | ✅ |
| 用戶分析 | ❌ | ✅ |
| 批量操作 | ❌ | ✅ |
| 危險操作 | ❌ | ✅ |

---

## 🔄 工作流程示例

### 場景：追星族想搶取 Taylor Swift 演唱會門票

**前台流程：**
```
1. 進入 demo.html
2. 點擊「開始使用」→ 匿名登入
3. 創建任務：
   - 名稱：Taylor Swift 台北演唱會
   - 時間：2025-12-20 10:00:00
   - 網址：https://ticketmaster.tw
   - 選擇器：.buy-button
4. 點擊「開始」執行
5. 等待系統自動搶票
6. 收到成功通知 ✅
```

**後台監控流程（同時進行）：**
```
1. 管理員進入 admin.html
2. 輸入 admin/admin123 登入
3. 查看儀表板：看到新用戶創建了任務
4. 進入「任務監控」：實時看到用戶的任務狀態
5. 進入「系統監控」：確認系統性能正常
6. 任務完成後可在「統計分析」查看成功率
```

---

## ⚙️ 技術細節

### 核心模塊

1. **bot-engine.js** - 搶票任務管理
   - 添加/刪除/更新任務
   - 任務生命周期管理
   - 統計計算

2. **automation-engine.js** - 自動化執行
   - 任務排程
   - DOM 自動點擊
   - 重試機制
   - 錯誤恢復

3. **notifications.js** - 通知系統
   - 桌面通知
   - 通知歷史
   - 去重機制

4. **storage.js** - 數據存儲
   - GUN.js 集成
   - LocalStorage 備份
   - 跨設備同步

5. **admin.js** - 後台管理
   - 全局數據聚合
   - 性能指標計算
   - 導出功能

### 數據流向

```
用戶操作 (前台)
    ↓
botEngine (任務管理)
    ↓
automationEngine (執行調度)
    ↓
notifications (發送通知)
    ↓
storage (保存數據)
    ↓
adminSystem (後台統計)
```

---

## 🧪 測試命令

```bash
# 運行所有測試
npm run test

# 監視模式測試
npm run test:watch

# 測試覆蓋率
npm run test:coverage

# 啟動開發伺服器
npm run dev
```

**測試狀態：✅ 121/121 測試通過**

---

## 🐛 常見問題

### Q: 為什麼後台看不到任務？
A: 確保已在前台創建了任務。後台會讀取 localStorage 中的所有任務。

### Q: 如何重置所有數據？
A: 進入後台 → 系統監控 → 點擊「重置系統」（需二次確認）

### Q: 能修改管理員密碼嗎？
A: 目前密碼硬編碼在 admin.html 中。生產環境應使用後端驗證。

### Q: 桌面通知不工作？
A: 檢查瀏覽器是否授予通知權限。在設置中啟用後刷新頁面。

### Q: 支持哪些瀏覽器？
A: Chrome 90+、Firefox 88+、Safari 14+、Edge 90+

---

## 📈 性能指標

| 指標 | 值 |
|------|-----|
| 代碼行數 | ~5,300 |
| 測試覆蓋 | 121 個測試 |
| 前端模塊 | 7 個 |
| 頁面數量 | 3 個 |
| 支持瀏覽器 | 現代瀏覽器 |

---

## 🎯 下一步計劃

- [ ] 性能優化（虛擬滾動、快取）
- [ ] 功能增強（導入/導出、批量操作）
- [ ] 安全加固（後端驗證、加密存儲）
- [ ] 文檔完善（API 文檔、用戶手冊）
- [ ] 部署準備（生產優化、CDN 配置）

---

## 📞 支持

遇到問題？檢查以下文件：
- **PRD.md** - 完整的產品需求文檔
- **AGENTS.md** - 項目進度記錄
- **FRONTEND_VS_BACKEND.md** - 前後台功能對比

祝你使用愉快！🎉
